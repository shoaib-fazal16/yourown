Ext.namespace('K.kreports.standardviewpanel');K.kreports.standardviewpanel.av=[{text:bi('LBL_NAME'),dataIndex:'name',sortable:false,width:150,editor:new Ext.form.TextField()},{text:bi('LBL_DISPLAY'),readOnly:true,dataIndex:'display',width:50,sortable:false,hidden:false,editor:new Ext.form.ComboBox({typeAhead:true,triggerAction:'all',lazyRender:true,mode:'local',store:new Ext.data.ArrayStore({id:0,fields:['value','text'],data:[['no',bi('LBL_NO')],['yes',bi('LBL_YES')],['hid',bi('LBL_HID')]]}),valueField:'value',displayField:'text'}),renderer:function(value){if(value!=undefined)return bi('LBL_'+value.toUpperCase());else return value;}},{text:bi('LBL_LINK'),readOnly:true,dataIndex:'link',width:50,sortable:false,hidden:false,editor:new Ext.form.ComboBox({typeAhead:true,triggerAction:'all',lazyRender:true,mode:'local',store:new Ext.data.ArrayStore({id:0,fields:['value','text'],data:[['no',bi('LBL_NO')],['yes',bi('LBL_YES')]]}),valueField:'value',displayField:'text'}),renderer:function(value){if(value!=undefined)return bi('LBL_'+value.toUpperCase());else return value;}},{text:bi('LBL_SORTSEQUENCE'),readOnly:true,dataIndex:'sort',width:50,sortable:false,hidden:false,editor:new Ext.form.ComboBox({typeAhead:true,triggerAction:'all',lazyRender:true,mode:'local',store:new Ext.data.ArrayStore({id:0,fields:['value','text'],data:[['-','-'],['asc',bi('LBL_SORT_ASC')],['desc',bi('LBL_SORT_DESC')],['sortable',bi('LBL_SORT_SORTABLE')]]}),valueField:'value',displayField:'text'}),renderer:function(value){if(value!=undefined&&value!='-')return bi('LBL_SORT_'+value.toUpperCase());else return value;}},{text:bi('LBL_SORTPRIORITY'),dataIndex:'sortpriority',sortable:false,width:50,editor:new Ext.form.NumberField()},{text:bi('LBL_WIDTH'),dataIndex:'width',sortable:false,width:50,editor:new Ext.form.NumberField()},{text:bi('LBL_WIDGET'),dataIndex:'widget',sortable:false,hidden:true,width:80,editor:new Ext.form.TextField()},{header:bi('LBL_OVERRIDETYPE'),width:160,dataIndex:'overridetype',editor:new Ext.form.field.ComboBox({typeAhead:true,triggerAction:'all',editable:false,forceSelection:true,lazyRender:true,edtiable:false,store:new Ext.data.ArrayStore({fields:['value','text'],data:[['-','-'],['none',bi('LBL_RENDERER_NONE')],['currency',bi('LBL_RENDERER_CURRENCY')],['percentage',bi('LBL_RENDERER_PERCENTAGE')],['number',bi('LBL_RENDERER_NUMBER')],['int',bi('LBL_RENDERER_INT')],['float',bi('LBL_RENDERER_FLOAT')],['date',bi('LBL_RENDERER_DATE')],['datetime',bi('LBL_RENDERER_DATETIME')],['datetutc',bi('LBL_RENDERER_DATETUTC')],['bool',bi('LBL_RENDERER_BOOL')],['text',bi('LBL_RENDERER_TEXT')]]}),valueField:'value',displayField:'text'}),renderer:function(value){if(value!=undefined&&value!='')return bi('LBL_RENDERER_'+value.toUpperCase());else return value;}},{header:bi('LBL_OVERRIDEALIGNMENT'),width:160,dataIndex:'overridealignment',editor:new Ext.form.field.ComboBox({typeAhead:true,triggerAction:'all',editable:false,forceSelection:true,lazyRender:true,edtiable:false,store:new Ext.data.ArrayStore({fields:['value','text'],data:[['-','-'],['left',bi('LBL_ALIGNMENT_LEFT')],['right',bi('LBL_ALIGNMENT_RIGHT')],['center',bi('LBL_ALIGNMENT_CENTER')]]}),valueField:'value',displayField:'text'}),renderer:function(value){if(value!=undefined&&value!='')return bi('LBL_ALIGNMENT_'+value.toUpperCase());else return value;}}];K.kreports.standardviewpanel.aQ=new Ext.form.field.ComboBox({store:['Synchronous','Asynchronous','None'],typeAhead:true,fieldLabel:bi('LBL_STANDARDGRIDPROPERTIES_COUNT'),editable:false,modeode:'local',triggerAction:'all',selectOnFocus:true,value:'Synchronous',listeners:{select:function(bs){var aW=new Object();if(document.getElementById('listtypeproperties').value!='')aW=Ext.JSON.decode(document.getElementById('listtypeproperties').value);if(aW.standardViewProperties==undefined)aW.standardViewProperties=new Object();aW.standardViewProperties.processCount=bs.getValue();document.getElementById('listtypeproperties').value=Ext.JSON.encode(aW);}}});K.kreports.standardviewpanel.bU=new Ext.form.field.Number({fieldLabel:bi('LBL_STANDARDGRIDENTRIES_COUNT'),listeners:{blur:function(dF){var aW=new Object();if(document.getElementById('listtypeproperties').value!='')aW=Ext.JSON.decode(document.getElementById('listtypeproperties').value);if(aW.standardViewProperties==undefined)aW.standardViewProperties=new Object();aW.standardViewProperties.listEntries=dF.getValue();document.getElementById('listtypeproperties').value=Ext.JSON.encode(aW);}}});K.kreports.standardviewpanel.panel=new Ext.grid.Panel({store:listGridStore,border:false,columns:K.kreports.standardviewpanel.av,plugins:[Ext.create('Ext.grid.plugin.CellEditing',{clicksToEdit:1})],sm:new Ext.selection.RowModel(),viewConfig:{plugins:{dropGroup:'moduleFields',dragGroup:'moduleFields',ptype:'gridviewdragdrop',enableDrop:true},listeners:{beforedrop:function(node,data,overModel,dropPosition,dropFunctions,eOpts){if(data.records[0].$className=='K.kreports.EditViewFieldgrid.FieldsDataModel'){for(var recordCounter=0;recordCounter<data.records.length;recordCounter++){var storeIndex=this.getStore().indexOf(overModel);if(dropPosition=='after')storeIndex++;if(storeIndex==this.getStore().count())this.getStore().add({fieldid:kGuid(),path:activeTreeNodePath+'::'+data.records[recordCounter].data.id,displaypath:FieldsListingEditorGrid.title,fieldname:data.records[recordCounter].data.name,name:data.records[recordCounter].data.name,display:'yes',sequence:this.getStore().getNextSequence(),width:'100',sort:'-',sortpriority:'',jointype:'required',sqlfunction:'-',summaryfunction:'',groupby:'no',link:'no',fixedvalue:''});else this.getStore().insert(storeIndex,{fieldid:kGuid(),path:activeTreeNodePath+'::'+data.records[recordCounter].data.id,displaypath:FieldsListingEditorGrid.title,fieldname:data.records[recordCounter].data.name,name:data.records[recordCounter].data.name,display:'yes',sequence:this.getStore().getNextSequence(),width:'100',sort:'-',sortpriority:'',jointype:'required',sqlfunction:'-',summaryfunction:'',groupby:'no',link:'no',fixedvalue:''});this.getStore().ax();}dropFunctions.cancelDrop();return true;}else{var T=this.getStore();var be=0;switch(dropPosition){case 'after':be=Number(overModel.get('sequence'))+1;break;case 'before':be=Number(overModel.get('sequence'));break;}for(var i=Number(data.records[0].get('sequence'));i<be-1;i++){if(T.getAt(i).get('sequence')!=data.records[0].data.sequence){var aC=Number(T.getAt(i).get('sequence'))-1;if(aC<10)aC='0'+aC;T.getAt(i).set('sequence',aC);}}for(var i=be-1;i<T.getCount();i++){if(T.getAt(i).get('sequence')!=data.records[0].data.sequence){var aC=Number(T.getAt(i).get('sequence'))+1;if(aC<10)aC='0'+aC;T.getAt(i).set('sequence',aC);}}if(be<10)be='0'+be;data.records[0].set('sequence',be);T.sort('sequence','ASC');T.ax();dropFunctions.cancelDrop();return true;}},drop:function(){}}},tbar:new Ext.Toolbar({items:[K.kreports.standardviewpanel.aQ,K.kreports.standardviewpanel.bU]}),initialize:function(){var aW=new Object();if(document.getElementById('listtypeproperties').value!='')aW=Ext.JSON.decode(document.getElementById('listtypeproperties').value);if(aW.standardViewProperties!=undefined&&aW.standardViewProperties.processCount!=undefined)K.kreports.standardviewpanel.aQ.setValue(aW.standardViewProperties.processCount);else K.kreports.standardviewpanel.aQ.setValue('Synchronous');if(aW.standardViewProperties!=undefined&&aW.standardViewProperties.listEntries!=undefined)K.kreports.standardviewpanel.bU.setValue(aW.standardViewProperties.processCount);else K.kreports.standardviewpanel.bU.setValue(25);}}); 